\section{Implementierung des Entscheidungsbaums}\label{sec:implementierung}
Das Programm implementiert den zuvor beschriebenen Algorithmus in der Programmiersprache Java.
Lediglich um Kommandozeilenparameter angenehmer einzupflegen wird eine Bibliothek verwendet.

\subsection{Ausführen des Programms}
\todoask[inline]{Anderer Dateiname?}
Im Anhang an diese Dokument befindet sich die Datei \enquote{tree.jar}.
Grundlegend kann das Programm, wie in \autoref{lst:jar-aufruf} gezeigt, aufgerufen werden.
Erforderlich ist hierfür zumindest Java in der Version 8.

\begin{lstlisting}[
    caption=Einfacher Aufruf des Programms,
    label=lst:jar-aufruf,
    language=bash
]
java -jar tree.jar
\end{lstlisting}

Durch verschiedene Parameter kann das Programm beeinflusst werden:
Die Parameter und ihre Standartwerte sind in folgdender Übersicht dargestellt.

\begin{description}
    \setlength\itemsep{-0.5em}
    \item[\texttt{-{}-teach, -t}]
        Datei, welche zum Trainieren genutzt wird\\
        Standard: \texttt{Wohnungskartei\_Muster\_Master\_5\_K\_teach.csv}
    \item[\texttt{-{}-check, -c}]
        Datei, welche mit dem Baum geprüft wird\\
        Standard: <leer>
    \item[\texttt{-{}-print, -p}]
        Wenn gesetzt, wird der Baum wie in \autoref{appendix:baum-training} dargestellt\\
        Standard: false
    \item[\texttt{-{}-default, -d}]
        Initiale Defaultwahrscheinlichkeit\\
        Standard: 0,5
    \item[\texttt{-{}-min-ratio, -r}]
        Mindestverhältnis zwischen Werten eines Attributs und Beispielmenge zur weiteren Unterteilung.\\
        Standard: 1
    \item[\texttt{-{}-use-saved-tree, -u}]
        Wenn gesetzt wird der Baum aus der angegebenen Datei geladen und nicht neu erzeugt.\\
        Standard: <leer>
    \item[\texttt{-{}-save-tree, -s}]
        Speichert den neu trainierten Baum in der angegebenen Datei.\\
        Standard: <leer>
    \item[\texttt{-{}-help}]
        Gibt die Hilfe in der Kommandozeile aus
\end{description}



\subsection{Besondere Aspekte}
\paragraph{Attribute}
Alle verfügbaren Attribute werden als \lstinline[language=Java]{enum} modelliert.
Jedes \lstinline[language=Java]{enum} gibt über die Funktion
\lstinline[language=Java]{getWerte()} die möglichen Ausprägungen als Liste von Zeichenketter zurück.

Auf diese Weise kann dass entsprechende Attribut as Parameter in Funktionsaufrufen übergeben werden und
innerhalb diese Funktion kann -- falls notwendig -- auf die möglichen Attributswerte zugegriffen werden.

\paragraph{Einlesen der Daten}
Weitestgehend werden die Daten direkt eingelesen und in ein \emph{Datensatz}-Objekt überführt.
Dieses Objekt enthält je ein Attribut für jedes der Merkmale und die Bewertung.
Für das Merkmal \enquote{Heizung} und für die Bewertung sind jedoch Schritte zur Vorverarbeitung notwendig:

Aus dem Zeichenketten \enquote{ja} und \enquote{nein} der Bewertung wird der entsprechende boolesche Wert ermittel.
In der Attributsausprägung \enquote{Lueftungsheizung} enthält der Datensatz anstatt des \textit{ue} ein undefiniertes Zeichen.
Dieses Problem wird dadurch gelöst, dass der Wert wie in \autoref{lst:heizung} angepasst wird.
Zwar wäre auch eine einmalige Änderung der entsprechende Werte in der Beispieldatei möglich,
die Programmzeile gestattet es aber auch, dass andere Dateien mit gleicher Formatierung bedenkenlos genutzt werden können.

\begin{lstlisting}[
    firstnumber=54,
    stepnumber=54,
    caption={Anpassen von \enquote{Heizung}},
    label=lst:heizung,
    language=Java
]
heizung = heizung.endsWith("ftungsheizung") ?
                    "Lueftungsheizung" :
                    heizung;
\end{lstlisting}

\paragraph{Datensatz}
Ein Datensatz-Objekt enthält für jeden relevanten Merkmalstyp eine Zeichenkette mit entsprechenden Namen.
Um dynamisch den Wert eines bestimmten Attributs zu erhalten kann dieses über die Funktion \lstinline[language=Java]{get()}
in \autoref{lst:datensatz-get} erfragt werden.

\lstinputlisting[
    caption={\texttt{get}-Funktion des Datensatzes (gekürzt)},
    label=lst:datensatz-get,
    language=Java
]{datensatz_get.java}

Für alle \enquote{normalen} Attribute wird der entsprechende Wert des Datensatzes zurückgegben.
Da die Bewertung ein boolescher Wert ist, die Funktion aber eine Zeichenkette zurückgeben muss,
wird dieser Wert entsprechend in eine Konstante umgewandelt.

\paragraph{Spezialisierung}
Das vorliegende Programm ist vor alle durch die Attribute und den Datensatz stark auf den gegebenen Anwendungsfall spezialisiert.
Theoretisch wäre es möglich ein Programm zu so konzipieren, dass es die Attribute und deren Wertemenge selbstständig aus den vorliegenden Daten extrahiert.
Dies würde jedoch die Komplexität und damit die Fehleranfälligkeit des Programms deutlich erhöhen.

\paragraph{Rekursionen}
Zum Erstellen des Baumes, aber auch zu Evaulation eines Datensatzes und zum Darstellen des Baumes wird Rekursion genutzt.
Beim Erstellen wird ein Attribut ausgewählt, und für jede Ausprägung ein Unterbaum nach gleiche Muster gebildet bis eine Enebedingung erreicht ist.
Details hierzu sind in \autoref{alg:baum-erzeugen} dargestellt.

Das \enquote{Ausdrucken} des Baums geschieht,
indem erst die Daten des aktuellen Knotens un
dann nach und nach die Daten der Unterbäume zu einer Zeichenkette hinzugefügt werden.

Um den Wert eines neuen Datensatzes zu ermitteln wird ausgehend von der Wurzel in jedem Knoten der zugehörige Attributswert aus dem Datensatz ausgelesen.
Dann wird die Bestimmungsfunktoin des zu diesem Wert zugehörige Unterbaums aufgerufen.
Dies geschieht rekursiv bis ein Blattknoten erreicht und damit der ermittelt ist.

\subsection{Test und Ergebnisbewertung}
